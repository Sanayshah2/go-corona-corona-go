{% extends 'covidapp/base.html' %}



{% block style %}
<style>
      * {
      margin: 0;
    }

    

    #map {
      width: 100%;
      height: 70%;
    }


   
  .ta{
    margin-bottom: 30px;
  }
.my-custom-scrollbar {
position: relative;
height: 500px;
overflow: auto;
}
.table-wrapper-scroll-y {
display: block;
}


  body {
    padding: 0;
    margin: 0;
    height: 100vh;
    width: 100%;
    background: #121212;
}

form{
    position: relative;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    transition: all 1s;
    width: 50px;
    height: 50px;
    background: #1d1d1d;
    box-sizing: border-box;
    border-radius: 25px;
    border: 3px solid rgb(139, 139, 139);
    padding: 5px;
}

input{
    position: absolute;
    color: whitesmoke;
    background-color: #121212;
    top: 0;
    left: 0;
    width: 100%;;
    height: 42.5px;
    line-height: 30px;
    outline: 0;
    border: 0;
    display: none;
    font-size: 1em;
    border-radius: 20px;
    padding: 0 20px;
}

.f{
    
    padding: 12px;
    
    
    position: absolute;
    top: 0;
    right: 0;
    border-radius: 50%;
    color: #575757;
    text-align: center;
    font-size: 1.2em;
    transition:all 0.5s;
    
}

form{
    width: 250px;
    cursor: pointer;
}

form input{
    display: block;
}

form .f{
    background: #161616;
    color: white;
}

form .f:hover{
    background: white;
    color: black;
  }


</style>
{% endblock style %}







{% block content %}

<div class='card' style="background-color:rgb(31, 31, 31);margin:12px;padding: 12px;">
<strong style="letter-spacing: 1px;font-size: 12px;"><marquee onmouseover="stop()" onmouseout="start()">
  Top 3 countries with highest number of cases.&ensp;&ensp;1. {{1.name}} : {{1.latest_data.confirmed}}&ensp;&ensp;2. {{2.name}} : {{2.latest_data.confirmed}}&ensp;&ensp;3. {{3.name}} : {{3.latest_data.confirmed}}
</marquee>
</strong>
</div>
<br><br>

<div class="container">       

<form method='post' action='/search/' class="">
  {% csrf_token %}
  
  <input  class=""  list="browsers" onfocus="this.value=''"  placeholder="Enter state,country " type="search"   name="searchstate">
  <button type="submit" ><i class="f fa fa-search " style="" type="submit"></i></button>
  
  <datalist id="browsers"  style="background-color: #121212;">
    {% for s in statelist %}
    <option value='{{s}}' style="background-color: #121212;">
    {% endfor %}
    {% for x in all_country %}
    <option value='{{x.code}}'>{{x.name}}</option>
    {% endfor %}
  </datalist>
</form>

{% if messages %}
{% for x in messages %}
<center><span class='alert alert-custom text-muted' style="background-color: #121212;">{{x}}</span></center>
{% endfor %}
{% endif %}
</div>
<div class=" container" >
  <h5 class='kit animated animatedFadeInUp fadeInUp' style="text-align: center;font-weight: bold;margin:25px;color:white;animation-delay: 0.2s;"><i class='fas fa-globe-americas' style="padding: 12px;color: skyblue;"></i>GLOBAL <span style="color: bisque;">COVID19</span> STATS </h4><br>
  <div class=" row" style="text-align: center;padding-bottom:30px;margin: 3px;">
    <div class=" col-4  animated animatedFadeInUp fadeInUp" style="animation-delay: 0.3s;">
      <h5 id="confirm" class="kit" style="color:rgba(93, 93, 255, 0.801);font-weight: bold;">{{global.total_cases}}</h5>
      <p style="font-size: 15px;"><span class="count" style="color: rgb(160, 160, 253);">[+{{global.total_new_cases_today}}]</span></p><br>
      <p style="color: rgba(93, 93, 255, 0.801);font-size: 15px;font-weight: bold;">Confirmed</h1>
    </div>
    <div class="col-4  animated animatedFadeInUp fadeInUp" style="animation-delay: 0.4s;">
      <h5 class="kit" style="color: red;font-weight: bold;">{{global.total_deaths}}</h5>
      <p style="font-size: 15px;"><span class="count" style="color: rgb(240, 133, 133);">[+{{global.total_new_deaths_today}}]</span></p><br>
      <p style="color: red;font-size: 15px;font-weight: bold;">Deaths</h8>
    </div><br>
    <div class="col-4  animated animatedFadeInUp fadeInUp" style="animation-delay: 0.5s;">
      <h5 class="kit" style="color: green;font-weight: bold;">{{global.total_recovered}}</h5>
      <p  style="font-size: 15px;"><span class="count" style="color: yellowgreen;"><i class="fa fa-heart" aria-hidden="true" style="padding: 5px;"></i></span></p><br>
      <p  style="color: green;font-size: 15px;font-weight: bold;">Cured</p>
    </div>
    

  </div>
  <div style="text-align: center;"><a style="animation-delay: 0.5s;" href={% url 'globalview' %} class="animated animatedFadeInUp fadeInUp" >Click for more info</a>
  </div><br>
    <div style="margin: 10px;margin-top: 20px;border-bottom: 1px solid lightgray;"></div>

</div><br><br>

<div class="container animated animatedFadeInUp fadeInUp"  style="text-align: center  ;animation-delay: 0.8s; text-align: center;"> 
  
  <h5 class='kit' style="text-align: center;font-weight: bold;color: white;"><i class="fa fa-viruses" style="padding: 12px;"></i><span style="color: bisque;">COVID19</span> IN INDIA</h6><br><br>
      
      <div class="row" style="padding-bottom:30px;">
          <div class=" col-3 animated animatedFadeInUp fadeInUp" style="animation-delay:0.9s;margin-bottom: 30px;">
            <h5 class='kit'><span class="counter " style="color: rgba(93, 93, 255, 0.801);font-weight: bold;">{{india_total.confirmed}}</span></h3>
            <p ><span class="counter" style="font-size: 12px;color:rgb(160, 160, 253); ">[+{{india_total.deltaconfirmed}}]</span></p><br>         
              <p style="font-size: 12px;font-weight: bold;color: rgba(93, 93, 255, 0.801);">Cases</p>
          </div>

          <div class="col-3 animated animatedFadeInUp fadeInUp" style="animation-delay:1s;margin-bottom: 30px;">
            <h5 class='kit'><span class="counter" style="color: rgb(203, 206, 10);font-weight: bold;">{{india_total.active}}</span></h1>
            <p ><span class="counter" style="font-size: 12px;color: rgb(203, 206, 10);"><i class="fa fa-heart" aria-hidden="true" style="padding-top: 5px;"></i></span></p><br>
              <p style="font-size: 12px;font-weight: bold;color: rgb(203, 206, 10);">Active</p>
          </div>

          <div class="col-3 animated animatedFadeInUp fadeInUp" style="animation-delay:1.2s;margin-bottom: 30px;"> 
            <h5 class='kit'><span class="counter" style="color: red;font-weight: bold;">{{india_total.deaths}}</span></h1>
            <p ><span class="counter" style="color: red;font-size: 12px;">+[{{india_total.deltadeaths}}]</span></p><br>                 
              <p   style="font-weight: bold;font-size: 12px;color: red;">Deaths</p> 
            </div>

          <div class="col-3 animated animatedFadeInUp fadeInUp" style="animation-delay:1.3s;margin-bottom: 40px;">
            <h5 class='kit'><span class="counter" style="color: green;font-weight: bold;">{{india_total.recovered}}</span></h1>
              <p style="font-size: 12px;"><span class="counter" style="color: green;">+[{{india_total.deltarecovered}}]</span></p><br>        
                <p style="font-size: 12px;font-weight: bold;color: green;">Cured</p>
          </div>
        <div class="container animated animatedFadeInUp fadeInUp" style="color: white;padding: 12px;animation-delay: 1.2s"><a href="/india/">Click here for statewise stats</a> </div>
        
        </div>
     
</div>
<div class='container'>
  <div style="border-top: 1px solid lightgray;margin: 4px;"></div>
</div>
<br><br>

<div class="container">
  <p style="color:rgba(255, 255, 224, 0.767);font-weight: bold;text-align: center;">Hover the marker for corona data in that country:</p><br>
    <div id="map"></div><br>
</div>

<div class=" container animated animatedFadeInUp fadeInUp " style="animation-delay: 1.4s;">
<h3 style="font-weight: 600;">World</h2><br>
<center>
<div class="table-wrapper-scroll-y my-custom-scrollbar">
<table >
    <tr>
      <th class='sticky-top' style='text-align: left;'>Country</th>
      <th class='sticky-top' style='color:rgba(93, 93, 255, 0.801);font-weight:1000'>Confirmed</th>
      <th class='sticky-top' style="color: red;">Deaths</th>
      <th class='sticky-top' style="color: green;">Recovered</th>
      
    </tr>
      
    {% for value in all_country %}
    <tr>
      <td><p style='text-align: left;'><a href='/country/{{value.code}}/'>{{value.rank}}. {{value.name}}</a></p></td>
      <td><p ><span style='color: rgba(93, 93, 255, 0.801);'>{% if value.today.confirmed != 0 %}+{{value.today.confirmed}}{% endif %}</span> {{value.latest_data.confirmed}}</p></td>
      <td><p ><span style="color: red;">{% if value.today.deaths != 0 %}+ {{value.today.deaths}}{% endif %}</span> {{value.latest_data.deaths}}</p></td>
      <td><p ><span style="color: green;">      </span> {{value.latest_data.recovered}}</p></td>
    </tr>
    {% endfor %}
  </table>
  </div>
</center>
</div></div> <br><br>



<!--  <div class='ta container' id='Asia'>
          <h3 style="font-weight: 600;">Asia</h2><br>
          <center>   
       
        <table>
            <tr style="color: white;background-color: royalblue;">
              <th style="text-align: left;">Country</th>
              <th >Confirmed</th>
              <th >Deaths</th>
              <th >Recovered</th>
              
            </tr>
             
            {% for i in countries1 %}
            {% if i.Continent == 'Asia' %}
            <tr>
              <td><p style="text-align: left;">{{i.id}}{{i.Country}}</p></td>
              <td><p ><span style='color: blue;'>{% if i.NewConfirmed %}+ {{i.NewConfirmed}}{% endif %}</span> {{i.TotalConfirmed}}</p></td>
              <td><p ><span style="color: red;">{% if i.NewDeaths %}+ {{i.NewDeaths}}{% endif %}</span> {{i.TotalDeaths}}</p></td>
              <td><p><span style="color: green;">{% if i.NewRecovered %}+ {{i.NewRecovered}}{% endif %}</span> {{i.TotalRecovered}}</p></td>
            </tr>
            {% endif %}
            {% endfor %}
          </table>
        </center>
        </div>
        <div class='container'>
          <h3 style="font-weight: 600;">Africa</h2><br>
            <center>
            <table>
                <tr >
                  <th style='text-align: left;'>Country</th>
                  <th style='color:blue;font-weight:1000'>Confirmed</th>
                  <th style="color: red;">Deaths</th>
                  <th style="color: green;">Recovered</th>
                  
                </tr>
                 
                {% for i in countries1 %}
                {% if i.Continent == 'Africa' %}
                <tr>
                  <td><p style='text-align: left;'>{{i.id}}{{i.Country}}</p></td>
                  <td><p ><span style='color: blue;'>{% if i.NewConfirmed %}+ {{i.NewConfirmed}}{% endif %}</span> {{i.TotalConfirmed}}</p></td>
                  <td><p ><span style="color: red;">{% if i.NewDeaths %}+ {{i.NewDeaths}}{% endif %}</span> {{i.TotalDeaths}}</p></td>
                  <td><p ><span style="color: green;">{% if i.NewRecovered %}+ {{i.NewRecovered}}{% endif %}</span> {{i.TotalRecovered}}</p></td>
                </tr>
                {% endif %}
                {% endfor %}
              </table>
            </center>
            </div>
            <div class='container'>
              <h3 style="font-weight: 600;">Europe</h2><br>
                <center>
                <table class="button1">
                    <tr style="color: white;background-color: royalblue;">
                      <th style="text-align: left;">Country</th>
                      <th >Confirmed</th>
                      <th >Deaths</th>
                      <th >Recovered</th>
                      
                    </tr>
                     
                    {% for i in countries1 %}
                    {% if i.Continent == 'Europe' %}
                    <tr>
                      <td style="text-align: left;"><p >{{i.id}}{{i.Country}}</p></td>
                      <td><p ><span style='color: blue;'>{% if i.NewConfirmed %}+ {{i.NewConfirmed}}{% endif %}</span> {{i.TotalConfirmed}}</p></td>
                      <td><p ><span style="color: red;">{% if i.NewDeaths %}+ {{i.NewDeaths}}{% endif %}</span> {{i.TotalDeaths}}</p></td>
                      <td><p ><span style="color: green;">{% if i.NewRecovered %}+ {{i.NewRecovered}}{% endif %}</span> {{i.TotalRecovered}}</p></td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                  </table>
                </center>
              </div>
              <div class='container'>
                  <h3 style="font-weight: 600;">North America</h2><br>
                    <center>
                    <table class="button1">
                        <tr style="color: white;background-color: royalblue;">
                          <th style="text-align: left;">Country</th>
                          <th >Confirmed</th>
                          <th >Deaths</th>
                          <th >Recovered</th>
                          
                        </tr>
                         
                        {% for i in countries1 %}
                        {% if i.Continent == 'North America' %}
                        <tr>
                          <td style="text-align: left;"><p >{{i.id}}{{i.Country}}</p></td>
                          <td><p ><span style='color: blue;'>{% if i.NewConfirmed %}+ {{i.NewConfirmed}}{% endif %}</span> {{i.TotalConfirmed}}</p></td>
                          <td><p ><span style="color: red;">{% if i.NewDeaths %}+ {{i.NewDeaths}}{% endif %}</span> {{i.TotalDeaths}}</p></td>
                          <td><p ><span style="color: green;">{% if i.NewRecovered %}+ {{i.NewRecovered}}{% endif %}</span> {{i.TotalRecovered}}</p></td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                      </table>
                    </center>
                  </div>
                  <div class='container'>
                      <h3 style="font-weight: 600;">South America</h2><br>
            <center>
                        <table class="button1">
                            <tr style="color: white;background-color: royalblue;">
                              <th style="text-align: left;">Country</th>
                              <th >Confirmed</th>
                              <th >Deaths</th>
                              <th >Recovered</th>
                              
                            </tr>
                             
                            {% for i in countries1 %}
                            {% if i.Continent == 'South America' %}
                            <tr>
                              <td ><p style="text-align: left;">{{i.id}}{{i.Country}}</p></td>
                              <td><p ><span style='color: blue;'>{% if i.NewConfirmed %}+ {{i.NewConfirmed}}{% endif %}</span> {{i.TotalConfirmed}}</p></td>
                              <td><p ><span style="color: red;">{% if i.NewDeaths %}+ {{i.NewDeaths}}{% endif %}</span> {{i.TotalDeaths}}</p></td>
                              <td><p ><span style="color: green;">{% if i.NewRecovered %}+ {{i.NewRecovered}}{% endif %}</span> {{i.TotalRecovered}}</p></td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                          </table>
                        </center>
                      </div>
                        <div class='container'>
                          <h3 style="font-weight: 600;">Oceania</h2><br>
                            <center>
                            <table class="button1">
                                <tr style="color: white;background-color: royalblue;">
                                  <th style="text-align: left;">Country</th>
                                  <th >Confirmed</th>
                                  <th >Deaths</th>
                                  <th >Recovered</th>
                                  
                                </tr>
                                 
                                {% for i in countries1 %}
                                {% if i.Continent == 'Oceania' %}
                                <tr>
                                  <td style="text-align: left;"><p >{{i.id}}{{i.Country}}</p></td>
                                  <td><p ><span style='color: blue;'>{% if i.NewConfirmed %}+ {{i.NewConfirmed}}{% endif %}</span> {{i.TotalConfirmed}}</p></td>
                                  <td><p ><span style="color: red;">{% if i.NewDeaths %}+ {{i.NewDeaths}}{% endif %}</span> {{i.TotalDeaths}}</p></td>
                                  <td><p ><span style="color: green;">{% if i.NewRecovered %}+ {{i.NewRecovered}}{% endif %}</span> {{i.TotalRecovered}}</p></td>
                                </tr>
                                {% endif %}
                                {% endfor %}
                              </table>
                            </center>
                          </div>                            
        </div>
      </div><br> -->
{% block script %}
<script>
  const coordinates = {
    Latitude:[ 
      {% for x in all_country %}
      '{{x.coordinates.latitude}}', 
      {% endfor %}
    ],
    Longitude: [
      {% for x in all_country %}
      '{{x.coordinates.longitude}}', 
      {% endfor %}
    ],
    name:[
        {% for x in all_country %}
        '{{x.name}}',
        {% endfor %}
    ],
    Cases:[
        {% for x in all_country %}
        '{{x.latest_data.confirmed}}',
        {% endfor %}
    ],
    Deaths:[
        {% for x in all_country %}
        '{{x.latest_data.deaths}}',
        {% endfor %}
    ],
    Recovered:[
        {% for x in all_country %}
        '{{x.latest_data.recovered}}',
        {% endfor %}
    ]
  };
  console.log(coordinates)
  const map = L.map('map').setView([20, 77], 3);
  
 
  var CartoDB_DarkMatter = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
subdomains: 'abcd',
maxZoom: 19
}).addTo(map);

  for (let i = 0; i < Object.keys(coordinates.Latitude).length; i =i+ 2) {
    const marker = L.marker([
      coordinates.Latitude[i],
      coordinates.Longitude[i],
    ]);
    marker.myData = { id: coordinates.name[i] ,cases:coordinates.Cases[i],deaths:coordinates.Deaths[i],recovered:coordinates.Recovered[i]};
    marker.bindPopup("<p >"+ marker.myData.id +"</p>"+"<p>"+ "Cases"+" : "+marker.myData.cases +"</p>"+"<p>"+"Deaths"+" : "+marker.myData.deaths +"</p>"+"<p>"+"Recovered"+" : "+marker.myData.recovered +"</p>");
    marker.on('mouseover',function(e){
      this.openPopup();
    });
    marker.on('mouseout',function(e){
      this.closePopup();
    });

    marker.addTo(map);
  }
</script>

{% endblock script %}
    {% endblock content %}
